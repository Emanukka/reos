{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"Welcome to \u211ceos","text":"<p>\u211ceos is a thermodynamic library written in Rust with a Python interface. It provides tools for calculating thermodynamic properties and phase equilibria.</p> <pre><code>import numpy as np\nfrom reos.cpa import CPAParameters, CPAPureRecord\nfrom reos.eos import EquationOfState\nfrom reos.state import State\n\nparameters = CPAParameters.from_records([ \n    CPAPureRecord.new(\n        name = \"water\",\n        molar_weight = 18.01528,\n        a0 = 0.12277,\n        b = 0.014515e-3,\n        c1 = 0.67359,\n        tc = 647.29,\n        epsilon = 166.55e2,\n        kappa = 0.0692,\n        na = 2,\n        nb = 2\n    )\n])\n\n# or  CPAParameters.from_json([\"water\"], \"./parameters/cpa/kontogeorgis2006.json\")\n\neos = EquationOfState.scpa(parameters)\n\nt = 298.15\np = 1e5\nx = np.array([1.0])\n\ns = State.tpx(eos, t, p, x) \n\nprint(s)\n\nX = eos.unbonded_sites_fraction(t, s.density, x)\n\nprint(f\"Unbonded sites fraction = {X}\")\n</code></pre> <pre><code>State(t = 298.150 K, p = 100000.000000 Pa, \u03c1 = 55784.919890 mol/m\u00b3)\nUnbonded sites fraction = [0.07825138 0.07825138]\n</code></pre>"},{"location":"#models","title":"Models","text":"Model Description CPA Cubic Plus Association (srk, pr76, pr78) cubic Soave-Redlich-Kwong, Peng-Robinson 1976, Peng-Robinson 1978 <p>Each model implement its analytical expressions of derived properties of Helmholtz potential.</p>"},{"location":"#installation","title":"Installation","text":""},{"location":"#python","title":"Python","text":""},{"location":"#from-pip","title":"From pip","text":"<pre><code>pip install reos\n</code></pre>"},{"location":"#from-source","title":"From source","text":"<p>You must have rust compiler and maturin/PyO3 installed.</p> <p>To install the python package in your machine (such <code>pip install -e .</code>) and use the optimized version of the package:</p> <pre><code>cd pyreos\nmaturin develop --release \n</code></pre> <p>To build the the python wheel, just use</p> <pre><code>maturin build --release \n</code></pre>"},{"location":"#project-layout","title":"Project layout","text":""},{"location":"#repository","title":"Repository","text":"<pre><code>\u251c\u2500\u2500 crates\n\u251c\u2500\u2500 docs\n\u251c\u2500\u2500 mkdocs.yml\n\u251c\u2500\u2500 parameters\n\u251c\u2500\u2500 pyreos\n\u251c\u2500\u2500 pyreos-dev\n\u251c\u2500\u2500 pyreos-examples\n\u251c\u2500\u2500 README.md\n\u2514\u2500\u2500 site\n</code></pre> <ul> <li><code>crates</code>: Contains <code>reos</code>, which is the Rust package that implement all the core functionalites</li> <li><code>pyreos</code>: Rust package that create the Python interface from <code>reos</code></li> <li><code>pyreos-dev</code>: Directory used to test functionalites of <code>reos</code> in Python</li> <li><code>pyreos-examples</code>: Python examples of how to use <code>reos</code></li> </ul>"},{"location":"#python-package","title":"Python package","text":"<ul> <li><code>reos.eos</code>: Enables the creation and manipulation of equations of state with different models.</li> <li><code>reos.state</code>: Provides tools for working with thermodynamic states, including property calculations and phase equilibria.</li> <li><code>reos.{model_name}</code>: Each current model has its own submodule with its name, which contains the pure model record, the binary model record and the parameters objects .</li> </ul>"},{"location":"examples/cpa/water/","title":"Water","text":""},{"location":"examples/cpa/water/#initializing-scpa-eos","title":"Initializing SCPA EOS","text":"<pre><code>import numpy as np\n\nfrom reos.state import State\nfrom reos.consts import Consts\nfrom reos.cpa import CPAParameters\nfrom reos.eos import EquationOfState\n\n\np = CPAParameters.from_json([\"water\"], \"/parameters/cpa/kontogeorgis2006.json\")\neos = EquationOfState.scpa(p)\n\nsee parameters object later\n</code></pre>"},{"location":"examples/cpa/water/#liquid-vapor-equilibrium","title":"Liquid-vapor equilibrium","text":"<pre><code>def calc_psat(t,p0):\n\n    e = 1\n    max = 100\n    it = 0\n\n    while abs(e) &gt; 1e-8 and it &lt; max:\n\n        s1 = State.tpx(eos, t, p0, np.array([1.0]), 'vapor')\n        s2 = State.tpx(eos, t, p0, np.array([1.0]), 'liquid')\n        phiv = np.exp(s1.lnphi()[0])\n        phil = np.exp(s2.lnphi()[0])\n\n        r = phil / phiv\n\n        p0 = p0 * r\n        it += 1\n\n    return p0, s1, s2\n</code></pre>"},{"location":"examples/cpa/water/#computing-properties","title":"Computing properties","text":"<pre><code>N = 100\nT=np.linspace(250.0, 650, N)\n\nPRES = np.zeros_like(T)\nVAP = np.zeros_like(T,dtype=object)\nLIQ = np.zeros_like(T,dtype=object)\n\nXV = np.zeros_like(VAP,dtype=object)\nXL = np.zeros_like(LIQ,dtype=object)\n\nrhoV = np.zeros_like(VAP)\nrhoL = np.zeros_like(LIQ)\n\nentropyV = np.zeros_like(VAP)\nentropyL = np.zeros_like(LIQ)\n\nfor (i,t) in enumerate(T):\n\n    PRES[i], VAP[i], LIQ[i] = calc_psat(t, PRES[i-1] if i&gt;0 else 1e5)\n\n    liq = LIQ[i]\n    vap = VAP[i]\n\n    entropyL[i] = liq.entropy() \n    entropyV[i] = vap.entropy() \n\n    rhoV[i] = vap.density\n    rhoL[i] = liq.density\n</code></pre>"},{"location":"examples/cpa/water/#non-associated-sites-fraction","title":"Non-associated sites fraction","text":"<p>To compute the unbondend sites fraction, just use the correspondent eos at the points at the saturation states.</p> <pre><code>for (i,t) in enumerate(T):\n\n    ...\n\n    XL[i] = eos.unbonded_sites_fraction(t, rhoL[i], np.array([1.0]))[0]\n    XV[i] = eos.unbonded_sites_fraction(t, rhoV[i], np.array([1.0]))[0]\n</code></pre>"},{"location":"theory/models/association/","title":"Association","text":"<p>The implementation of association model in \u211ceos is based on the work of Michelsen 2001 and Michelsen 2006. The dimensionless association contribution to the Helmholtz free energy is given by:</p> \\[ a^{asc} = \\sum_j^S m_j \\left( \\ln X_j - \\frac{X_j}{2} + \\frac{1}{2} \\right) M_j \\] <p>where \\(S\\) is the number of distinguishable sites in the mixture, \\(m_j\\) is the molar fraction of site \\(j\\) and \\(M_j\\) is the multiplicity of site \\(j\\).</p> <p>The fraction of non-bonded sites \\(X_j\\) is obtained by solving implicitily:</p> <p>$$ X_j = \\frac{m_j}{m_j +  \\sum_l^S K_{jl} X_l M_l} $$ where \\(K_{jl}\\) is the association constant of sites \\(j\\) and \\(l\\):  $$ K_{jl} = \\rho m_j m_l \\Delta_{jl} $$ and \\(\\Delta^{jl}\\) is the association strength between sites \\(j\\) and \\(l\\). Because the expressions for \\(\\Delta^{jl}\\) depend on the specific association model, we can use the general expression of the dimensionless association strength: $$ \\delta^{jl} = \\kappa^{jl} \\left[ \\exp\\left( \\frac{\\epsilon^{jl}}{RT} \\right) - 1 \\right] $$ where \\(\\kappa^{jl}\\) is the association volume and \\(\\epsilon^{jl}\\) is the association energy between sites \\(j\\) and \\(l\\). Then,</p> <p>$$ \\Delta^{jl} = f_v ^{ik} \\delta^{jl} $$ where \\(f_v^{ik}\\) is a volumectric factor that depends on the specific model and the the combining rule choosen for the components hosts \\(i\\) and \\(k\\) of sites \\(j\\) and \\(l\\), respectively.</p> Model Volumetric factor \\(f_v^{ik}\\) PC-SAFT \\(d_{ik}^3\\, g_{ik}^{seg}\\) CPA \\(b_{ik}\\, g(\\rho)\\)"},{"location":"theory/models/association/#association-sites","title":"Association sites","text":"<p>Each site \\(s_j\\) has a owner \\(i\\), a type \\(\\alpha\\), an index \\(j\\), a multiplicity \\(M_j\\) and the parameters \\(\\epsilon^{j}\\) and \\(\\kappa^{j}\\). The type of each site defines the allowed interactions with other sites.</p> <p>Then, to satisfy all association schemes proposed by Huang and Radosz 1990, we propose 3 types of sites: \\(A, B\\) and \\(C\\). \\(A\\) and \\(B\\) sites can interact with all types except with sites of the same type, while \\(C\\) sites can interact with all types, including themselves.</p> Example: Association parameters with pure water 4C in Reos<pre><code>AssociativeParameters(\nna=1, nb=1, nc=0,\nsites=[\n   Site(type=A,owner=0,idx=0,mul=2,eps=16655,kappa=0.0692),\n   Site(type=B,owner=0,idx=1,mul=2,eps=16655,kappa=0.0692)],\ninteractions=[\n   SiteInteraction(j=0,l=1,epsilon=16655,kappa=0.0692, rule='cr1')\n   ])\n</code></pre>"},{"location":"theory/models/association/#calculation-of-unbonded-site-fractions","title":"Calculation of unbonded site fractions","text":"<p>To calculate the fractions of unbonded sites we can use the successive substitution method or the second-order method proposed by Michelsen 2006:</p> \\[ g_j = \\frac{\\partial Q}{\\partial X_j} = m_j \\left( \\frac{1}{X_j} - 1 \\right) - \\sum_{l=1}^{S} K_{jl} X_l M_l \\] \\[ \\hat{H}_{jl} = -\\delta_{jl}\\left( \\frac{m_{j}}{X_{j}^2} \\right) - K_{jl} \\] <p>Otherwise, in simple cases, the fractions of unbonded sites can be calculated analytically.</p> <p>If the mixture contains only 1 site of type \\(A\\) and 1 site of type \\(B\\), the fractions of unbonded sites can be calculated analytically:</p> \\[ X_2 = \\frac{2 m_1 m_2 }{m_{1} m_2 + k\\left(m_1 M_1 - m_2 M_2\\right) + \\sqrt{4km_2m_1^2M_1 + \\left[m_1m_2 + k \\left(m_2 M_2 m_1 M_1 \\right) \\right]^2}}  \\] <p>$$ X_1 = \\frac{m_1}{m_1 + k X_2 M_2} $$ where \\(k = K_{12} = K_{21}\\).</p> <p>If the mixture contains only 1 site of type \\(C\\), the fraction of unbonded fraction is given by:</p> \\[ X_1 = \\frac{2 m_1}{m_1 + \\sqrt{4 k M_1 m_1 + m_1^2}} \\] <p>where \\(k = K_{11}\\).</p>"}]}